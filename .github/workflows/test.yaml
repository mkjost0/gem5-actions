name: GitHub Actions gem5 Test Run
run-name: Using NULL ISA to run --help
on: [push]
jobs:
  Explore-GitHub-Actions:
    runs-on: [self-hosted, linux, x64]
    # running container with only a single arguement passes the image being used
    container: gcr.io/gem5-test/ubuntu-22.04_all-dependencies:latest

    steps:
    # checks out repository, should be more useful when
    # running checks on changed files
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0

      - name: Build and run gem5
        run: |
          scons build/NULL/gem5.opt -j $(nproc)
          build/NULL/gem5.opt --help
          # ldd build/NULL/gem5.opt

      # double checking that steps are run chronologically
      - name: Run gem5 separately (memory_traffic.py)
        run: |
          build/NULL/gem5.opt configs/examples/gem5_library/memory_traffic.py LinearGenerator 100

      - run: echo "üçè This job's status is ${{ job.status }}."
